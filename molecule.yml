---
# role specific overrides for molecule's config options. These will override ALL other config files.
molecule:
#   # directory in CWD to place all temp files, etc.
    molecule_dir: environments/molecule

#   # where temporary state will be stored (lives under molecule_dir)
#   state_file: state

#   # name of temporary vagrantfile / rakefile created during runs (lives under molecule_dir)
#   vagrantfile_file: vagrantfile
#   rakefile_file: rakefile

#   # directories to ignore when doing trailing whitespace checks on files during verify command
#   ignore_paths:
#     - .git
#     - .vagrant
#     - .molecule

#   # directory to look for serverspec tests
#   serverspec_dir: spec

#   # directory to look for testinfra tests
#   testinfra_dir: tests

#   # template files to load when creating corresponding temporary files
#   # this would be a good place to specify your own ansible.cfg template, for example
#   vagrantfile_template: vagrantfile.j2
#   ansible_config_template: ansible.cfg.j2
#   rakefile_template: rakefile.j2

#   # ssh arguments passed to `molecule login` command
#   raw_ssh_args:
#     - -o StrictHostKeyChecking=no
#     - -o UserKnownHostsFile=/dev/null

#   # sequence of commands to run when performing `molecule test`
    test:
      sequence:
        - destroy
        - create
        - converge
#        - idempotence
        - verify
        - destroy

# configuration options for the internal call to ansible-playbook
ansible:
#   # by default this lives under molecule_dir and is generated by molecule during execution
    config_file: ansible.cfg

#   # playbook to execute during `molecule converge`

    playbook: site.yml

#   # verbosity for ansible-playbook
#    verbose: vvvv

#   # most CLI options to ansible-playbook can be passed in this format, even those not listed
#   user: vagrant
#   connection: ssh
#   timeout: 30
#    sudo: False
#   sudo_user: False
#    ask_become_pass: True
#   ask_vault_pass: False
#   vault_password_file: False
#   limit: all
#   diff: True
#   tags: False
#   host_key_checking: False

#   # this can be the path to a custom inventory script/directory
#   # by default this lives under molecule_dir and is generated by molecule during execution
#   inventory_file: ansible_inventory

#   # raw ssh arguments passed to ansible-playbook
#   raw_ssh_args:
#     - -o UserKnownHostsFile=/dev/null
#     - -o IdentitiesOnly=yes
#     - -o ControlMaster=auto
#     - -o ControlPersist=60s

#  # any additional environment variables that ansible-playbook supports can be passed in here
#  raw_env_vars:
#    ANSIBLE_ACTION_PLUGINS: ../plugins

# configuration options for the internal call to vagrant
vagrant:
  # vagrant arguments that are global to all instances
  raw_config_args:
    - "ssh.insert_key = false"
#    - "vm.network 'forwarded_port', guest: 80, host: 8080"

  # molecule's --platform option will look for these names
  platforms:
    - name: trusty64
      box: trusty64
      box_url: https://vagrantcloud.com/ubuntu/boxes/trusty64/versions/14.04/providers/virtualbox.box
      # Optional: box_version - support for vagrant versioning
      # box_version: 0.1.0
      # Optional: very basic support for vagrant-triggers plugin
      # triggers:
      #  - trigger: before
      #    action: destroy
      #    cmd: run_remote 'subscription-manager unregister'

  providers:
    - name: digital_ocean
      type: digital_ocean
      options:
        image: ubuntu-14-04-x64
        region: ams3
        size: 512mb
    - name: virtualbox
      type: virtualbox
      options:
        memory: 512
        cpus: 1

  instances:
    - name: common
#      ansible_groups:
#        - group_1
#        - group_2
      interfaces:
        - network_name: private_network
          type: dhcp
          auto_config: true
      options:
        # prevents vagrant-01 from becoming vagrant-01-rhel-7 (platform is appended by default)
        append_platform_to_hostname: no
      # vagrant arguments specific to this instance
#      raw_config_args:
#        - "vm.synced_folder '../projects/web', '/web'"

    - name: zabbix-server
      ansible_groups:
        - zabbix_server
#        - group_2
      interfaces:
        - network_name: private_network
          type: dhcp
          auto_config: true
#        - network_name: private_network
#          type: dhcp
#          auto_config: false
      options:
        append_platform_to_hostname: no
